{"version":3,"sources":["hooks.js","authorization.js","repository.js","constants.js","styleComponents.js","MoneyAmount.js","utils.js","LineItem.js","Account.js","App.js","serviceWorker.js","index.js"],"names":["useLocalStorage","key","initialValue","arguments","length","undefined","_useState","useState","item","localStorage","getItem","JSON","parse","error","_useState2","Object","slicedToArray","value","setValue","val","setItem","stringify","console","log","accessToken","apiServer","getResource","resource","axios","get","concat","headers","Authorization","Access-Control-Allow-Origin","getAccounts","_ref","asyncToGenerator","regenerator_default","a","mark","_callee2","accountsResp","accounts","positions","balances","wrap","_context2","prev","next","sent","data","Promise","all","map","_ref2","_callee","account","_ref3","_ref4","positionsResp","balancesResp","_context","number","find","combinedBalances","currency","sortBy","position","currentMarketValue","stop","_x","apply","this","abrupt","totalEquity","getSymbols","_ref5","_callee3","symbolIDs","symbols","quotes","_ref6","_ref7","symbolsResp","quotesResp","_context3","join","forEach","id","symbolId","_x2","BREAKDOWNS","VEQT.TO","stocks","bonds","VGRO.TO","VBAL.TO","Subheading","styled","div","_templateObject","Flex","_templateObject2","SecondaryText","_templateObject3","MoneyAmount","num","amount","isRedacted","react_default","createElement","style","display","backgroundColor","width","height","Math","round","toFixed","replace","LineItem","label","total","marginBottom","alignItems","src_MoneyAmount","textAlign","Heading","h2","Account_templateObject","Account","balance","postTaxAdjustment","_useLocalStorage","_useLocalStorage2","isExpanded","setIsExpanded","sumBy","symbol","cash","onClick","type","es","src_LineItem","AUTHORIZATION_URL","search","window","location","hash","substring","hashObject","decodeURIComponent","access_token","api_server","initializeAPI","Container","App_templateObject","Body","App_templateObject2","Total","h1","App_templateObject3","StyledButton","button","_templateObject4","Footer","_templateObject5","FooterLabel","_templateObject6","App","isPostTax","setIsPostTax","_useLocalStorage3","_useLocalStorage4","setIsRedacted","_useLocalStorage5","_useLocalStorage6","lastUpdated","setLastUpdated","_useLocalStorage7","_useLocalStorage8","setAccounts","_useLocalStorage9","_useLocalStorage10","setBalances","_useLocalStorage11","_useLocalStorage12","setPositions","_useLocalStorage13","_useLocalStorage14","setSymbols","_useLocalStorage15","_useLocalStorage16","setQuotes","fetchData","uniq","flatten","values","Date","getTime","useEffect","handleRefresh","t0","message","includes","href","rrspAccountNumbers","filter","rrspPositions","flatMap","pickBy","v","k","nonRrspPositions","omitBy","rrspBalances","nonRrspBalances","combinedPositions","multiplier","combinedPositionsArr","reverse","rrspStocks","nonRrspStocks","rrspBonds","nonRrspBonds","rrspCash","nonRrspCash","overallTotal","src_Account","marginTop","moment","fromNow","checked","onChange","Boolean","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.40150880.chunk.js","sourcesContent":["import { useState } from \"react\";\n\nexport const useLocalStorage = (key, initialValue = null) => {\n  const [value, setValue] = useState(() => {\n    try {\n      const item = localStorage.getItem(key);\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      return initialValue;\n    }\n  });\n\n  const setAndStoreValue = val => {\n    try {\n      setValue(val);\n      localStorage.setItem(key, JSON.stringify(val));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return [value, setAndStoreValue];\n};\n","const TOKEN_KEY = \"__port-token__\";\nconst API_SERVER_KEY = \"__port-api-server__\";\n\nexport let accessToken = null;\nexport let apiServer = null;\n\nexport const initializeAPI = () => {\n  const search = window.location.hash\n    .substring(1)\n    .replace(/&/g, '\",\"')\n    .replace(/=/g, '\":\"');\n\n  if (!search) {\n    accessToken = localStorage.getItem(TOKEN_KEY);\n    apiServer = localStorage.getItem(API_SERVER_KEY);\n    return;\n  }\n\n  const hashObject = JSON.parse('{\"' + search + '\"}', (key, value) =>\n    key === \"\" ? value : decodeURIComponent(value)\n  );\n\n  accessToken = hashObject.access_token;\n  apiServer = hashObject.api_server;\n\n  localStorage.setItem(TOKEN_KEY, accessToken);\n  localStorage.setItem(API_SERVER_KEY, apiServer);\n\n  window.location.hash = \"\";\n};\n","import axios from \"axios\";\nimport find from \"lodash/find\";\nimport sortBy from \"lodash/sortBy\";\nimport { accessToken, apiServer } from \"./authorization\";\n\nconst getResource = resource =>\n  axios.get(`https://cors-anywhere.herokuapp.com/${apiServer}v1/${resource}`, {\n    headers: {\n      Authorization: `Bearer ${accessToken}`,\n      \"Access-Control-Allow-Origin\": \"*\"\n    }\n  });\n\nexport const getAccounts = async () => {\n  const accountsResp = await getResource(\"accounts\");\n  const accounts = accountsResp.data.accounts;\n\n  const positions = {};\n  const balances = {};\n\n  await Promise.all(\n    accounts.map(async account => {\n      const [positionsResp, balancesResp] = await Promise.all([\n        getResource(`accounts/${account.number}/positions`),\n        getResource(`accounts/${account.number}/balances`)\n      ]);\n\n      balances[account.number] = find(balancesResp.data.combinedBalances, {\n        currency: \"CAD\"\n      });\n      positions[account.number] = sortBy(\n        positionsResp.data.positions,\n        position => -position.currentMarketValue\n      );\n    })\n  );\n\n  return {\n    accounts: sortBy(\n      accounts,\n      account => -balances[account.number].totalEquity\n    ),\n    balances,\n    positions\n  };\n};\n\nexport const getSymbols = async symbolIDs => {\n  const symbols = {};\n  const quotes = {};\n\n  const [symbolsResp, quotesResp] = await Promise.all([\n    getResource(`symbols?ids=${symbolIDs.join(\",\")}`),\n    getResource(`markets/quotes?ids=${symbolIDs.join(\",\")}`)\n  ]);\n\n  symbolIDs.forEach(id => {\n    symbols[id] = find(symbolsResp.data.symbols, { symbolId: id });\n    quotes[id] = find(quotesResp.data.quotes, { symbolId: id });\n  });\n\n  return { symbols, quotes };\n};\n","export const BREAKDOWNS = {\n  \"VEQT.TO\": {\n    stocks: 1,\n    bonds: 0\n  },\n  \"VGRO.TO\": {\n    stocks: 0.8,\n    bonds: 0.2\n  },\n  \"VBAL.TO\": {\n    stocks: 0.6,\n    bonds: 0.4\n  }\n};\n","import styled from \"styled-components\";\n\nexport const Subheading = styled.div`\n  font-weight: bold;\n  font-size: 12px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  border-bottom: 1px solid #ccc;\n  margin-bottom: 5px;\n  margin-top: 15px;\n`;\n\nexport const Flex = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nexport const SecondaryText = styled.div`\n  line-height: 16px;\n  font-size: 12px;\n  color: #666;\n`;\n","import React from \"react\";\nimport { formatMoney } from \"./utils\";\n\nconst MoneyAmount = ({ amount, isRedacted }) =>\n  isRedacted ? (\n    <div\n      style={{\n        display: \"inline-block\",\n        backgroundColor: \"#333\",\n        width: \"4em\",\n        height: \"0.8em\"\n      }}\n    />\n  ) : (\n    <div>{formatMoney(amount)}</div>\n  );\n\nexport default MoneyAmount;\n","export const formatMoney = num =>\n  \"$\" +\n  Math.round(num)\n    .toFixed(0)\n    .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n\nexport const formatPercent = num => (num * 100).toFixed(1) + \"%\";\n","import React from \"react\";\nimport { Flex, SecondaryText } from \"./styleComponents\";\nimport { formatPercent } from \"./utils\";\nimport MoneyAmount from \"./MoneyAmount\";\n\nconst LineItem = ({ label, amount, total, isRedacted }) => (\n  <Flex style={{ marginBottom: 3 }}>\n    <div>\n      <div>{label}</div>\n    </div>\n    <Flex style={{ alignItems: \"baseline\" }}>\n      <MoneyAmount amount={amount} isRedacted={isRedacted} />\n      <SecondaryText style={{ width: 50, textAlign: \"right\" }}>\n        {formatPercent(amount / total)}\n      </SecondaryText>\n    </Flex>\n  </Flex>\n);\n\nexport default LineItem;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport sumBy from \"lodash/sumBy\";\nimport AnimateHeight from \"react-animate-height-auto\";\nimport { BREAKDOWNS } from \"./constants\";\nimport { Subheading } from \"./styleComponents\";\nimport LineItem from \"./LineItem\";\nimport { useLocalStorage } from \"./hooks\";\nimport MoneyAmount from \"./MoneyAmount\";\n\nconst Heading = styled.h2`\n  display: flex;\n  justify-content: space-between;\n  margin-top: 40px;\n  border-bottom: 2px solid #333;\n  font-size: 18px;\n  line-height: 24px;\n  padding-bottom: 5px;\n  margin-bottom: 0;\n`;\n\nconst Account = ({\n  account,\n  balance,\n  positions,\n  postTaxAdjustment,\n  isRedacted\n}) => {\n  const [isExpanded, setIsExpanded] = useLocalStorage(\n    `__port-is-expanded-${account.number}__`,\n    true\n  );\n  const stocks =\n    sumBy(\n      positions,\n      position =>\n        position.currentMarketValue * BREAKDOWNS[position.symbol].stocks\n    ) * postTaxAdjustment;\n  const bonds =\n    sumBy(\n      positions,\n      position =>\n        position.currentMarketValue * BREAKDOWNS[position.symbol].bonds\n    ) * postTaxAdjustment;\n  const cash = balance.cash * postTaxAdjustment;\n  const total = stocks + bonds + cash;\n\n  return (\n    <div key={account.number}>\n      <Heading\n        onClick={() => {\n          setIsExpanded(!isExpanded);\n        }}\n      >\n        <span>{account.type}</span>\n        <MoneyAmount amount={total} isRedacted={isRedacted} />\n      </Heading>\n      <AnimateHeight isExpanded={isExpanded}>\n        <Subheading>Positions</Subheading>\n        {positions.map(position => (\n          <LineItem\n            key={position.symbol}\n            label={position.symbol}\n            amount={position.currentMarketValue * postTaxAdjustment}\n            total={total - cash}\n            isRedacted={isRedacted}\n          />\n        ))}\n        <Subheading>Asset Classes</Subheading>\n        <LineItem\n          label=\"Stocks\"\n          amount={stocks}\n          total={total}\n          isRedacted={isRedacted}\n        />\n        <LineItem\n          label=\"Bonds\"\n          amount={bonds}\n          total={total}\n          isRedacted={isRedacted}\n        />\n        <LineItem\n          label=\"Cash\"\n          amount={cash}\n          total={total}\n          isRedacted={isRedacted}\n        />\n      </AnimateHeight>\n    </div>\n  );\n};\n\nexport default Account;\n","import React, { useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport flatMap from \"lodash/flatMap\";\nimport flatten from \"lodash/flatten\";\nimport map from \"lodash/map\";\nimport omitBy from \"lodash/omitBy\";\nimport pickBy from \"lodash/pickBy\";\nimport sortBy from \"lodash/sortBy\";\nimport sumBy from \"lodash/sumBy\";\nimport uniq from \"lodash/uniq\";\nimport { useLocalStorage } from \"./hooks\";\nimport { initializeAPI } from \"./authorization\";\nimport { getAccounts, getSymbols } from \"./repository\";\nimport { BREAKDOWNS } from \"./constants\";\nimport Account from \"./Account\";\nimport { Subheading } from \"./styleComponents\";\nimport LineItem from \"./LineItem\";\nimport moment from \"moment\";\nimport MoneyAmount from \"./MoneyAmount\";\n\nconst CLIENT_ID = \"YCUSnajluQMAHR32DnJhupUYJddjZQ\";\nconst REDIRECT_URI = \"https://tomcheng.github.io/allocation-reports\";\n\nconst AUTHORIZATION_URL = `https://login.questrade.com/oauth2/authorize?client_id=${CLIENT_ID}&response_type=token&redirect_uri=${REDIRECT_URI}`;\nconst TAX_RATE = 20;\n\ninitializeAPI();\n\nconst Container = styled.div`\n  height: 100vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Body = styled.div`\n  padding: 30px 30px 20px;\n  flex-grow: 1;\n  flex-shrink: 1;\n  overflow: auto;\n`;\n\nconst Total = styled.h1`\n  margin-top: 0;\n  margin-bottom: 30px;\n  text-align: center;\n`;\n\nconst StyledButton = styled.button`\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: inherit;\n  line-height: inherit;\n  text-decoration: underline;\n  background-color: transparent;\n`;\n\nconst Footer = styled.div`\n  text-align: center;\n  padding: 15px 0;\n  border-top: 1px solid #ccc;\n`;\n\nconst FooterLabel = styled.label`\n  margin: 0 10px;\n`;\n\nconst App = () => {\n  const [isPostTax, setIsPostTax] = useLocalStorage(\"__port-post-tax__\", true);\n  const [isRedacted, setIsRedacted] = useLocalStorage(\n    \"__port-redacted__\",\n    false\n  );\n  const [lastUpdated, setLastUpdated] = useLocalStorage(\n    \"__port-last-updated__\",\n    null\n  );\n  const [accounts, setAccounts] = useLocalStorage(\"__port-accounts__\", null);\n  const [balances, setBalances] = useLocalStorage(\"__port-balances__\", {});\n  const [positions, setPositions] = useLocalStorage(\"__port-positions__\", {});\n  const [symbols, setSymbols] = useLocalStorage(\"__port-symbols__\", {});\n  const [quotes, setQuotes] = useLocalStorage(\"__port-quotes__\", {});\n\n  const fetchData = async () => {\n    const { accounts, balances, positions } = await getAccounts();\n\n    const symbolIDs = uniq(\n      flatten(Object.values(positions)).map(position => position.symbolId)\n    );\n\n    const { symbols, quotes } = await getSymbols(symbolIDs);\n\n    setSymbols(symbols);\n    setQuotes(quotes);\n    setPositions(positions);\n    setBalances(balances);\n    setAccounts(accounts);\n    setLastUpdated(new Date().getTime());\n  };\n\n  useEffect(() => {\n    if (!accounts) {\n      fetchData();\n    }\n  }, []);\n\n  const handleRefresh = async () => {\n    try {\n      setAccounts(null);\n      await fetchData();\n    } catch (e) {\n      if (e.message.includes(\"401\")) {\n        window.location.href = AUTHORIZATION_URL;\n      } else {\n        console.log(e);\n      }\n    }\n  };\n\n  const togglePostTax = () => {\n    setIsPostTax(!isPostTax);\n  };\n\n  const toggleRedacted = () => {\n    setIsRedacted(!isRedacted);\n  };\n\n  const rrspAccountNumbers = (accounts || [])\n    .filter(account => account.type === \"RRSP\")\n    .map(account => account.number);\n  const rrspPositions = flatMap(\n    Object.values(pickBy(positions, (v, k) => rrspAccountNumbers.includes(k)))\n  );\n  const nonRrspPositions = flatMap(\n    Object.values(omitBy(positions, (v, k) => rrspAccountNumbers.includes(k)))\n  );\n  const rrspBalances = Object.values(\n    pickBy(balances, (v, k) => rrspAccountNumbers.includes(k))\n  );\n  const nonRrspBalances = Object.values(\n    omitBy(balances, (v, k) => rrspAccountNumbers.includes(k))\n  );\n\n  const postTaxAdjustment = isPostTax ? 1 - TAX_RATE / 100 : 1;\n\n  const combinedPositions = {};\n  (accounts || []).forEach(account => {\n    const multiplier =\n      isPostTax && account.type === \"RRSP\" ? 1 - TAX_RATE / 100 : 1;\n    positions[account.number].forEach(position => {\n      combinedPositions[position.symbol] =\n        (combinedPositions[position.symbol] || 0) +\n        position.currentMarketValue * multiplier;\n    });\n  });\n  const combinedPositionsArr = sortBy(\n    map(combinedPositions, (value, symbol) => ({\n      value,\n      symbol\n    })),\n    \"value\"\n  ).reverse();\n\n  const rrspStocks =\n    sumBy(\n      rrspPositions,\n      position =>\n        position.currentMarketValue * BREAKDOWNS[position.symbol].stocks\n    ) * postTaxAdjustment;\n  const nonRrspStocks = sumBy(\n    nonRrspPositions,\n    position => position.currentMarketValue * BREAKDOWNS[position.symbol].stocks\n  );\n  const rrspBonds =\n    sumBy(\n      rrspPositions,\n      position =>\n        position.currentMarketValue * BREAKDOWNS[position.symbol].bonds\n    ) * postTaxAdjustment;\n  const nonRrspBonds = sumBy(\n    nonRrspPositions,\n    position => position.currentMarketValue * BREAKDOWNS[position.symbol].bonds\n  );\n  const rrspCash = sumBy(rrspBalances, \"cash\") * postTaxAdjustment;\n  const nonRrspCash = sumBy(nonRrspBalances, \"cash\");\n  const overallTotal =\n    rrspStocks +\n    nonRrspStocks +\n    rrspBonds +\n    nonRrspBonds +\n    rrspCash +\n    nonRrspCash;\n\n  if (!accounts) {\n    return <a href={AUTHORIZATION_URL}>Authorize</a>;\n  }\n\n  return (\n    <Container>\n      <Body>\n        <Total>\n          <MoneyAmount amount={overallTotal} isRedacted={isRedacted} />\n        </Total>\n        <Subheading>Positions</Subheading>\n        {combinedPositionsArr.map(({ value, symbol }) => (\n          <LineItem\n            key={symbol}\n            label={symbol}\n            amount={value}\n            total={overallTotal - (rrspCash + nonRrspCash)}\n            isRedacted={isRedacted}\n          />\n        ))}\n        <Subheading>Asset Classes</Subheading>\n        <LineItem\n          label=\"Stocks\"\n          amount={rrspStocks + nonRrspStocks}\n          total={overallTotal}\n          isRedacted={isRedacted}\n        />\n        <LineItem\n          label=\"Bonds\"\n          amount={rrspBonds + nonRrspBonds}\n          total={overallTotal}\n          isRedacted={isRedacted}\n        />\n        <LineItem\n          label=\"Cash\"\n          amount={rrspCash + nonRrspCash}\n          total={overallTotal}\n          isRedacted={isRedacted}\n        />\n        {accounts.map(account => (\n          <Account\n            key={account.number}\n            account={account}\n            balance={balances[account.number]}\n            positions={positions[account.number]}\n            postTaxAdjustment={account.type === \"RRSP\" ? postTaxAdjustment : 1}\n            symbols={symbols}\n            quotes={quotes}\n            isRedacted={isRedacted}\n          />\n        ))}\n        <div style={{ marginTop: 40, textAlign: \"center\" }}>\n          {lastUpdated && <span>Updated {moment(lastUpdated).fromNow()}.</span>}{\" \"}\n          <StyledButton type=\"button\" onClick={handleRefresh}>\n            Refresh\n          </StyledButton>\n        </div>\n      </Body>\n      <Footer>\n        <FooterLabel>\n          <input type=\"checkbox\" checked={isPostTax} onChange={togglePostTax} />{\" \"}\n          Post tax ({TAX_RATE}%)\n        </FooterLabel>\n        <FooterLabel>\n          <input\n            type=\"checkbox\"\n            checked={isRedacted}\n            onChange={toggleRedacted}\n          />{\" \"}\n          Redacted\n        </FooterLabel>\n      </Footer>\n    </Container>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}