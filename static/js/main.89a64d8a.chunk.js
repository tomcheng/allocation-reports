(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{225:function(t,n,e){"use strict";e.r(n);var a=e(0),r=e.n(a),o=e(29),c=e.n(o),u=(e(91),e(6)),s=e.n(u),l=e(13),i=e(2),m=e(4),p=e(5),b=e(42),f=e.n(b),d=e(80),v=e.n(d),h=e(43),y=e.n(h),g=e(30),x=e.n(g),O=e(7),j=e.n(O),k=e(81),E=e.n(k),_=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=Object(a.useState)(function(){try{var e=localStorage.getItem(t);return e?JSON.parse(e):n}catch(a){return n}}),r=Object(i.a)(e,2),o=r[0],c=r[1];return[o,function(n){try{c(n),localStorage.setItem(t,JSON.stringify(n))}catch(e){console.log(e)}}]},w=null,A=null,S=e(82),V=e.n(S),M=e(31),q=e.n(M),B=e(44),C=e.n(B),R=function(t){return V.a.get("https://cors-anywhere.herokuapp.com/".concat(A,"v1/").concat(t),{headers:{Authorization:"Bearer ".concat(w),"Access-Control-Allow-Origin":"*"}})},I=function(){var t=Object(l.a)(s.a.mark(function t(){var n,e,a,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R("accounts");case 2:return n=t.sent,e=n.data.accounts,a={},r={},t.next=8,Promise.all(e.map(function(){var t=Object(l.a)(s.a.mark(function t(n){var e,o,c,u;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([R("accounts/".concat(n.number,"/positions")),R("accounts/".concat(n.number,"/balances"))]);case 2:e=t.sent,o=Object(i.a)(e,2),c=o[0],u=o[1],r[n.number]=q()(u.data.combinedBalances,{currency:"CAD"}),a[n.number]=C()(c.data.positions,function(t){return-t.currentMarketValue});case 8:case"end":return t.stop()}},t)}));return function(n){return t.apply(this,arguments)}}()));case 8:return t.abrupt("return",{accounts:C()(e,function(t){return-r[t.number].totalEquity}),balances:r,positions:a});case 9:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),P=function(){var t=Object(l.a)(s.a.mark(function t(n){var e,a,r,o,c,u;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={},a={},t.next=4,Promise.all([R("symbols?ids=".concat(n.join(","))),R("markets/quotes?ids=".concat(n.join(",")))]);case 4:return r=t.sent,o=Object(i.a)(r,2),c=o[0],u=o[1],n.forEach(function(t){e[t]=q()(c.data.symbols,{symbolId:t}),a[t]=q()(u.data.quotes,{symbolId:t})}),t.abrupt("return",{symbols:e,quotes:a});case 10:case"end":return t.stop()}},t)}));return function(n){return t.apply(this,arguments)}}(),J={"VEQT.TO":{stocks:1,bonds:0},"VGRO.TO":{stocks:.8,bonds:.2},"VBAL.TO":{stocks:.6,bonds:.4}};function T(){var t=Object(m.a)(["\n  line-height: 16px;\n  font-size: 12px;\n  color: #666;\n"]);return T=function(){return t},t}function z(){var t=Object(m.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return z=function(){return t},t}function N(){var t=Object(m.a)(["\n  font-weight: bold;\n  font-size: 12px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  border-bottom: 1px solid #ddd;\n  margin-bottom: 5px;\n  margin-top: 15px;\n"]);return N=function(){return t},t}var Q=p.a.div(N()),U=p.a.div(z()),D=p.a.div(T()),F=function(t){return"$"+Math.round(t).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")},W=function(t){var n=t.label,e=t.amount,a=t.total;return r.a.createElement(U,{style:{marginBottom:3}},r.a.createElement("div",null,r.a.createElement("div",null,n)),r.a.createElement(U,{style:{alignItems:"baseline"}},r.a.createElement("div",null,F(e)),r.a.createElement(D,{style:{width:50,textAlign:"right"}},(e/a*100).toFixed(1)+"%")))};function Y(){var t=Object(m.a)(["\n  margin-top: 30px;\n  margin-bottom: 10px;\n"]);return Y=function(){return t},t}var $=p.a.h2(Y()),G=function(t){var n=t.account,e=t.balance,a=t.positions,o=t.postTaxAdjustment,c=j()(a,function(t){return t.currentMarketValue*J[t.symbol].stocks})*o,u=j()(a,function(t){return t.currentMarketValue*J[t.symbol].bonds})*o,s=e.cash*o,l=c+u+s;return r.a.createElement("div",{key:n.number},r.a.createElement($,null,n.type),r.a.createElement(Q,null,"Asset Classes"),r.a.createElement(W,{label:"Stocks",amount:c,total:l}),r.a.createElement(W,{label:"Bonds",amount:u,total:l}),r.a.createElement(W,{label:"Cash",amount:s,total:l}),r.a.createElement(Q,null,"Positions"),a.map(function(t){return r.a.createElement(W,{key:t.symbol,label:t.symbol,amount:t.currentMarketValue*o,total:l-s})}))};function H(){var t=Object(m.a)(["\n  text-align: center;\n  margin-top: 20px;\n  margin-bottom: 20px;\n"]);return H=function(){return t},t}function L(){var t=Object(m.a)(["\n  text-align: right;\n"]);return L=function(){return t},t}function Z(){var t=Object(m.a)(["\n  padding: 20px 30px;\n"]);return Z=function(){return t},t}!function(){var t=window.location.hash.substring(1).replace(/&/g,'","').replace(/=/g,'":"');if(t){var n=JSON.parse('{"'+t+'"}',function(t,n){return""===t?n:decodeURIComponent(n)});w=n.access_token,A=n.api_server}}();var K=p.a.div(Z()),X=p.a.div(L()),tt=p.a.h1(H()),nt=function(){var t=_("__port-post-tax__",!0),n=Object(i.a)(t,2),e=n[0],o=n[1],c=_("__port-accounts__",null),u=Object(i.a)(c,2),m=u[0],p=u[1],b=_("__port-balances__",{}),d=Object(i.a)(b,2),h=d[0],g=d[1],O=_("__port-positions__",{}),k=Object(i.a)(O,2),w=k[0],A=k[1],S=_("__port-symbols__",{}),V=Object(i.a)(S,2),M=V[0],q=V[1],B=_("__port-quotes__",{}),C=Object(i.a)(B,2),R=C[0],T=C[1];if(Object(a.useEffect)(function(){var t=function(){var t=Object(l.a)(s.a.mark(function t(){var n,e,a,r,o,c,u,l;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I();case 2:return n=t.sent,e=n.accounts,a=n.balances,r=n.positions,o=E()(v()(Object.values(r)).map(function(t){return t.symbolId})),t.next=9,P(o);case 9:c=t.sent,u=c.symbols,l=c.quotes,q(u),T(l),A(r),g(a),p(e);case 17:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();m||t()},[]),!m)return r.a.createElement("a",{href:"https://login.questrade.com/oauth2/authorize?client_id=".concat("YCUSnajluQMAHR32DnJhupUYJddjZQ","&response_type=token&redirect_uri=").concat("https://tomcheng.github.io/allocation-reports")},"Authorize");var z=m.filter(function(t){return"RRSP"===t.type}).map(function(t){return t.number}),N=f()(Object.values(x()(w,function(t,n){return z.includes(n)}))),U=f()(Object.values(y()(w,function(t,n){return z.includes(n)}))),D=Object.values(x()(h,function(t,n){return z.includes(n)})),Y=Object.values(y()(h,function(t,n){return z.includes(n)})),$=e?.8:1,H=j()(N,function(t){return t.currentMarketValue*J[t.symbol].stocks})*$,L=j()(U,function(t){return t.currentMarketValue*J[t.symbol].stocks}),Z=j()(N,function(t){return t.currentMarketValue*J[t.symbol].bonds})*$,nt=j()(U,function(t){return t.currentMarketValue*J[t.symbol].bonds}),et=j()(D,"cash")*$,at=j()(Y,"cash"),rt=H+L+Z+nt+et+at;return r.a.createElement(K,null,r.a.createElement(X,null,r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:e,onChange:function(){o(!e)}})," ","Post tax amounts (",20,"%)")),r.a.createElement(tt,null,F(rt)),r.a.createElement(Q,null,"Accounts"),m.map(function(t){return r.a.createElement(W,{key:t.number,label:t.type,amount:h[t.number].totalEquity*("RRSP"===t.type?$:1),total:rt})}),r.a.createElement(Q,null,"Asset Classes"),r.a.createElement(W,{label:"Stocks",amount:H+L,total:rt}),r.a.createElement(W,{label:"Bonds",amount:Z+nt,total:rt}),r.a.createElement(W,{label:"Cash",amount:et+at,total:rt}),m.map(function(t){return r.a.createElement(G,{key:t.number,account:t,balance:h[t.number],positions:w[t.number],postTaxAdjustment:"RRSP"===t.type?$:1,symbols:M,quotes:R})}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(nt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},86:function(t,n,e){t.exports=e(225)},91:function(t,n,e){}},[[86,1,2]]]);
//# sourceMappingURL=main.89a64d8a.chunk.js.map